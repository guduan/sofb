#Merge CellX, CellY into $(SR) orbitX, orbitY

record(waveform, "$(SR):1stHALF-SOFB{$(BPM)}${DATA}") {
	field(NELM, "90")
	field(FTVL, "${TYPE}")	  	
}
record(waveform, "$(SR):2ndHALF-SOFB{$(BPM)}${DATA}") {
	field(NELM, "90")
	field(FTVL, "${TYPE}")	  	
}
record(waveform, "$(SR):ID_PART-SOFB{IDBPM}${DATA}") {
	field(NELM, "18")
	field(FTVL, "${TYPE}")	  	
}
record(waveform, "$(SR)-SOFB{$(BPM)}orb:${DATA}") {
	field(NELM, "198")
	field(FTVL, "${TYPE}")	  	
}

## Remove orb: for shifted orbit (C30:1-6, C01:1-6, .... C29:1-6)
record(waveform, "$(SR)-SOFB{$(BPM)}${SIGNAL}") {
	field(NELM, "198")
	field(FTVL, "${TYPE}")	  	
}

record(aSub, "$(SR):1stHALF-SOFB{$(BPM)}${DATA}_aSub")
{
### This is the SOFB samping rate controller
#	field(SCAN, "2 second")
	field(SCAN, "$(SOFBRATE) second")
	field(SNAM, "${bpmMerge1}")
	field(INPA, "$(SR):${C01}-SOFB{$(BPM)}${DATA}")
	field(FTA,  "${TYPE}")	
	field(NOA,  "6")
	field(INPB, "$(SR):${C02}-SOFB{$(BPM)}${DATA}")
	field(FTB,  "${TYPE}")	
	field(NOB,  "6")
	field(INPC, "$(SR):${C03}-SOFB{$(BPM)}${DATA}")
	field(FTC,  "${TYPE}")	
	field(NOC,  "6")
	field(INPD, "$(SR):${C04}-SOFB{$(BPM)}${DATA}")
	field(FTD,  "${TYPE}")	
	field(NOD,  "6")
	field(INPE, "$(SR):${C05}-SOFB{$(BPM)}${DATA}")
	field(FTE,  "${TYPE}")	
	field(NOE,  "6")
	field(INPF, "$(SR):${C06}-SOFB{$(BPM)}${DATA}")
	field(FTF,  "${TYPE}")	
	field(NOF,  "6")
	field(INPG, "$(SR):${C07}-SOFB{$(BPM)}${DATA}")
	field(FTG,  "${TYPE}")	
	field(NOG,  "6")
	field(INPH, "$(SR):${C08}-SOFB{$(BPM)}${DATA}")
	field(FTH,  "${TYPE}")	
	field(NOH,  "6")
	field(INPI, "$(SR):${C09}-SOFB{$(BPM)}${DATA}")
	field(FTI,  "${TYPE}")	
	field(NOI,  "6")
	field(INPJ, "$(SR):${C10}-SOFB{$(BPM)}${DATA}")
	field(FTJ,  "${TYPE}")	
	field(NOJ,  "6")
	field(INPK, "$(SR):${C11}-SOFB{$(BPM)}${DATA}")
	field(FTK,  "${TYPE}")	
	field(NOK,  "6")
	field(INPL, "$(SR):${C12}-SOFB{$(BPM)}${DATA}")
	field(FTL,  "${TYPE}")	
	field(NOL,  "6")
	field(INPM, "$(SR):${C13}-SOFB{$(BPM)}${DATA}")
	field(FTM,  "${TYPE}")	
	field(NOM,  "6")
	field(INPN, "$(SR):${C14}-SOFB{$(BPM)}${DATA}")
	field(FTN,  "${TYPE}")	
	field(NON,  "6")
	field(INPO, "$(SR):${C15}-SOFB{$(BPM)}${DATA}")
	field(FTO,  "${TYPE}")	
	field(NOO,  "6")

	field(OUTA, "$(SR):1stHALF-SOFB{$(BPM)}${DATA} PP")
	field(NOVA, "90")
	field(FTVA, "${TYPE}")
	
	field(FLNK, "$(SR):2ndHALF-SOFB{$(BPM)}${DATA}_aSub")
}

record(aSub, "$(SR):2ndHALF-SOFB{$(BPM)}${DATA}_aSub")
{
	field(SNAM, "${bpmMerge1}")
	field(INPA, "$(SR):${C16}-SOFB{$(BPM)}${DATA}")
	field(FTA,  "${TYPE}")	
	field(NOA,  "6")
	field(INPB, "$(SR):${C17}-SOFB{$(BPM)}${DATA}")
	field(FTB,  "${TYPE}")	
	field(NOB,  "6")
	field(INPC, "$(SR):${C18}-SOFB{$(BPM)}${DATA}")
	field(FTC,  "${TYPE}")	
	field(NOC,  "6")
	field(INPD, "$(SR):${C19}-SOFB{$(BPM)}${DATA}")
	field(FTD,  "${TYPE}")	
	field(NOD,  "6")
	field(INPE, "$(SR):${C20}-SOFB{$(BPM)}${DATA}")
	field(FTE,  "${TYPE}")	
	field(NOE,  "6")
	field(INPF, "$(SR):${C21}-SOFB{$(BPM)}${DATA}")
	field(FTF,  "${TYPE}")	
	field(NOF,  "6")
	field(INPG, "$(SR):${C22}-SOFB{$(BPM)}${DATA}")
	field(FTG,  "${TYPE}")	
	field(NOG,  "6")
	field(INPH, "$(SR):${C23}-SOFB{$(BPM)}${DATA}")
	field(FTH,  "${TYPE}")	
	field(NOH,  "6")
	field(INPI, "$(SR):${C24}-SOFB{$(BPM)}${DATA}")
	field(FTI,  "${TYPE}")	
	field(NOI,  "6")
	field(INPJ, "$(SR):${C25}-SOFB{$(BPM)}${DATA}")
	field(FTJ,  "${TYPE}")	
	field(NOJ,  "6")
	field(INPK, "$(SR):${C26}-SOFB{$(BPM)}${DATA}")
	field(FTK,  "${TYPE}")	
	field(NOK,  "6")
	field(INPL, "$(SR):${C27}-SOFB{$(BPM)}${DATA}")
	field(FTL,  "${TYPE}")	
	field(NOL,  "6")
	field(INPM, "$(SR):${C28}-SOFB{$(BPM)}${DATA}")
	field(FTM,  "${TYPE}")	
	field(NOM,  "6")
	field(INPN, "$(SR):${C29}-SOFB{$(BPM)}${DATA}")
	field(FTN,  "${TYPE}")	
	field(NON,  "6")
	field(INPO, "$(SR):${C30}-SOFB{$(BPM)}${DATA}")
	field(FTO,  "${TYPE}")	
	field(NOO,  "6")

	field(OUTA, "$(SR):2ndHALF-SOFB{$(BPM)}${DATA} PP")
	field(NOVA, "90")
	field(FTVA, "${TYPE}")

	field(FLNK, "$(SR):ID_PART-SOFB{$(BPM)}${DATA}_aSub") 
}

record(aSub, "$(SR):ID_PART-SOFB{$(BPM)}${DATA}_aSub")
{
	field(SNAM, "${bpmMerge3}")
	field(INPA, "$(SR):C03-SOFB{IDBPM}${DATA}")
	field(FTA,  "${TYPE}")	
	field(NOA,  "6")
	field(INPB, "$(SR):C08-SOFB{IDBPM}${DATA}")
	field(FTB,  "${TYPE}")	
	field(NOB,  "6")
	field(INPC, "$(SR):C18-SOFB{IDBPM}${DATA}")
	field(FTC,  "${TYPE}")	
	field(NOC,  "6")

	field(OUTA, "$(SR):ID_PART-SOFB{IDBPM}${DATA} PP")
	field(NOVA, "18")
	field(FTVA, "${TYPE}")

	field(FLNK, "$(SR)-SOFB{IDBPM}orb:${DATA}_aSub") 
}

record(aSub, "$(SR)-SOFB{IDBPM}orb:${DATA}_aSub") 
{
	field(SNAM, "${bpmMerge2}")
	field(INPA, "$(SR):1stHALF-SOFB{IDBPM}${DATA}")
	field(FTA, "${TYPE}")
	field(NOA, "90")
	field(INPB, "$(SR):2ndHALF-SOFB{IDBPM}${DATA}")
	field(FTB, "${TYPE}")
	field(NOB, "90")
	field(INPC, "$(SR):ID_PART-SOFB{IDBPM}${DATA}")
	field(FTB, "${TYPE}")
	field(NOB, "18")
	
	field(OUTA, "$(SR)-SOFB{$(BPM)}orb:${DATA} PP")
	field(NOVA, "198")
	field(FTVA, "${TYPE}")

	field(OUTB, "$(SR)-SOFB{$(BPM)}${SIGNAL} PP")
	field(NOVB, "198")
	field(FTVB, "${TYPE}")
}
